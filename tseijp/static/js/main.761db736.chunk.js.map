{"version":3,"sources":["src/utils.ts","page/utils.ts","page/index.tsx","src/Page/utils.ts","src/Note/hooks.ts","src/Page/index.ts","webpack:///./src/index.ts?ffb4","src/Note/index.tsx","src/Page/hooks.ts","src/User/index.ts"],"names":["joinURL","strArray","resultArray","length","TypeError","match","shift","replace","filter","str","i","String","push","join","parts","split","is","arr","Array","isArray","obj","a","Object","prototype","toString","call","fun","num","und","nul","set","Set","map","Map","equ","b","keys","pageConfig","onChange","document","getElementById","scroll","top","left","behavior","scrollTop","customPage","isSign","status","portname","isLocal","isHome","id","pathname","fetcher","url","headers","axios","get","href","then","res","Error","data","Wrapper","styled","div","props","background","padding","Note","usePage","page","setPage","useNote","urls","note","setNote","useState","language","lang","setLang","useGrid","md","lg","size","setSize","dark","setDark","onView","useMemo","p","next","onClick","results","n","key","rate","max","space","color","style","fontSize","source","ja_text","en_text","toUpperCase","charSet","name","content","rel","ReactDOM","render","equalPathname","u","URL","every","_","self","defaultPage","window","location","v","find","hostname","protocol","port","search","hash","navigator","normPage","state","entries","sort","forEach","val","getp","geti","maxLength","reduce","joinPage","initGetURL","initGetter","initPoster","initNoteConfig","getURLRef","useRef","getterRef","posterRef","configRef","isFetching","useEffect","initURL","normalizeURL","current","setTimeout","pre","getNote","useCallback","updateURL","updateGetter","updateConfig","previousURL","diff","r","postNote","updatePoster","config","pageRef","confRef","defaultConf","newPage","history","pushState"],"mappings":"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","file":"static/js/main.761db736.chunk.js","sourcesContent":["// ************************* 🍡 join-url 🍡 ************************* //\r\n// * This function is fork of join-url/urljoin\r\n// * Code : https://github.com/jfromaniello/url-join/blob/master/lib/url-join.js\r\n// ************************* *************** ************************* //\r\nexport function joinURL (...strArray:(string|number)[]) : string {\r\n    var resultArray = [];\r\n    if (strArray.length === 0) return ''\r\n    if (typeof strArray[0] !== 'string') throw new TypeError('Url must be string.');\r\n    if (strArray[0].match(/^[^/:]+:\\/*$/) && strArray.length > 1)\r\n        strArray[0] = strArray.shift() + strArray[0];\r\n    if (strArray[0].match(/^file:\\/\\/\\//))\r\n        strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1:///');\r\n    else\r\n        strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1://');\r\n    strArray = strArray.filter(str=>str!==\"\")\r\n    for (var i = 0; i < strArray.length; i++) {\r\n        let str = strArray[i];\r\n        if (typeof str === 'number') str = String(str)\r\n        if (typeof str !== 'string') throw new TypeError(`${str} must be a string. Received ${typeof str}`);\r\n        if (str === '') continue;\r\n        if (i > 0) str = str.replace(/^[\\/]+/, '');                   //eslint-disable-line\r\n        if (i < strArray.length - 1) str = str.replace(/[\\/]+$/, ''); //eslint-disable-line\r\n        else str = str.replace(/[\\/]+$/, '/');                        //eslint-disable-line\r\n        resultArray.push(str);\r\n    }\r\n    let str = (resultArray as string[]).join('/');\r\n    str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\r\n    let parts = str.split('?');\r\n    str = parts.shift() + (parts.length > 0 ? '?': '') + parts.join('&');\r\n    return str;\r\n}\r\n// ************************* 🍭 helpers 🍭 ************************* //\r\n// * This function is fork of react-spring\r\n// * Code : https://github.com/pmndrs/react-spring/blob/master/src/shared/helpers.ts\r\n// ************************* *************** ************************* //\r\nexport const is = {\r\n    arr: Array.isArray,\r\n    obj: (a: unknown): a is object    => Object.prototype.toString.call(a) === '[object Object]',\r\n    fun: (a: unknown): a is Function  => typeof a === 'function',\r\n    str: (a: unknown): a is string    => typeof a === 'string',\r\n    num: (a: unknown): a is number    => typeof a === 'number',\r\n    und: (a: unknown): a is undefined => a === void 0,\r\n    nul: (a: unknown): a is null      => a === null,\r\n    set: (a: unknown): a is Set<any>  => a instanceof Set,\r\n    map: (a: unknown): a is Map<any, any> => a instanceof Map,\r\n    equ(a: any, b: any) {\r\n    if (typeof a !== typeof b) return false\r\n        if (is.str(a) || is.num(a)) return a === b\r\n        if (is.obj(a) &&\r\n            is.obj(b) &&\r\n            Object.keys(a).length + Object.keys(b).length === 0)\r\n            return true\r\n        let i\r\n        for (i in a) if (!(i in b))     return false\r\n        for (i in b) if (a[i] !== b[i]) return false\r\n        return is.und(i) ? a === b : true\r\n    },\r\n}\r\n\r\nexport function merge(target: any, lowercase: boolean = true) {\r\n  return (object: object) =>\r\n    (is.arr(object) ? object : Object.keys(object)).reduce(\r\n        (acc: any, element) => {\r\n            const key = lowercase\r\n              ? element[0].toLowerCase() + element.substring(1)\r\n              : element\r\n            acc[key] = target(key)\r\n            return acc\r\n        },\r\n        target\r\n    )\r\n}\r\n","import axios from 'axios'\r\nimport {Page} from '@tsei/core'\r\nimport {Credit, URLType} from '../src'\r\n// *************************📋 FOR NOTE 📋************************* //\r\nexport const scrollTop=()=>document.getElementById('root')?.scroll({top:0,left:0,behavior:'smooth',});\r\nexport const pageConfig = { onChange:() => scrollTop() }\r\nexport type CustomPage =\r\n   {portname:string[], isHome:boolean,\r\n    pathname:string[], status:string, }\r\nexport const customPage : Partial<Page<CustomPage>> = {\r\n    isSign:false,status:\"\", portname: ({isLocal}) => isLocal?[\"3000\",\"8000\",\"8000\"]:[],\r\n    isHome:({id}) => !id  , pathname: ({id,status}) =>\r\n        [   `/note/${ id?id+'/':'' }`,\r\n        `/api/note/${ id?id+'/':'' }`,\r\n        status!==\"UP\"? `/auth/`: `/api/user/`]\r\n}\r\nexport const fetcher = async (url:URLType, headers={'Content-Type':'application/json'}) =>\r\n    axios.get(url.href, {headers}).then(res => {\r\n        if(!res || res.status!==200)\r\n            throw new Error('Bad Request')\r\n        return res.data\r\n    })\r\n\r\nexport const signin = async (url:URLType, cred:Credit, headers={'Content-Type':'application/json'}) =>\r\n    axios.post(url.href, cred, {headers}).then(res => {\r\n        if (res.status>201 || !res.data.token)\r\n            throw new Error('Bad Request')\r\n        return {username:cred.username, authtoken:res.data.token}\r\n    })\r\n","import React, {FC, useState, useMemo} from 'react'\nimport styled from 'styled-components'\nimport ReactDOM from 'react-dom'\nimport { Mdmd } from '@tsei/mdmd'\nimport { useGrid } from 'use-grid'\nimport { Card, Grow, Head } from '@tsei/core'\nimport { Helmet, HelmetProvider } from 'react-helmet-async';\nimport { useNote, usePage} from '../src'\nimport { Sides, Trans} from '@tsei/core'\nimport { customPage, CustomPage, pageConfig, fetcher } from './utils'\nimport '@fortawesome/fontawesome-free/css/all.min.css';\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\nimport \"mdbreact/dist/css/mdb.css\";\n\nconst Wrapper = styled.div<any>`\n    min-height: 100vh;\n    overflow: hidden;\n    background: ${props=>props.background};\n    padding-top: ${props=>props.padding}px;\n`\n\nexport const Note :FC = () => {\n    // ******************** FOR FETCH ******************** //\n    const [page, setPage] = usePage<CustomPage>(customPage, pageConfig)\n    const [note, setNote] = useNote(page.urls[1], fetcher)\n    // ******************** FOR DESIGN ******************** //\n    const [lang, setLang] = useState<string>(page.language)\n    const [size, setSize] = useGrid <number>({md:1, lg:1.5})\n    const [dark, setDark] = useGrid <number>({md:1, lg:0  })\n    // ******************** FOR RENDER ******************** //\n    const onView   = useMemo(()=>()=>setNote(p=>p?.next),[setNote])\n    const onClick  = useMemo(()=>()=>setPage({id:\"\"})   ,[setPage])\n    return (\n        <Wrapper background={dark?\"#000\":\"#f1f1f1\"} padding={size*100}>\n            <Head {...{dark,size,onClick}}>Note</Head>\n            { note?.results instanceof Array && note.results.map(n =>\n                <Card {...{key: n.id, rate: .1, ...page.isHome\n                        ? {max: 500,onClick :()=>setPage({id: n.id+\"\"})}\n                        : {size},dark,space:size*25}}>\n                    <Mdmd color={dark?\"dark\":\"elegant\"}\n                          style={{fontSize:\"1rem\"}}\n                         source={lang===\"ja\"? n.ja_text: n.en_text}/>\n                </Card>\n            )}\n            { note?.next && <Grow {...{size,onClick:()=>onView(),onView}} />}\n            {/******************** FANTASTIC UI ********************/}\n            <Sides {...{size}}>\n                <a style={{color:\"#818181\"}} href=\"/\"    >Home</a>\n                <a style={{color:\"#818181\"}} href=\"/hook\">Hook</a>\n                <a style={{color:\"#818181\"}} href=\"/note\">Note</a>\n            </Sides>\n            <Trans {...{size}}>\n                <div onClick={()=>setLang(p=>p!=='ja'?'ja':'en')}>{lang.toUpperCase()}</div>\n                <div onClick={()=>setDark((p:any)=>({md:p.lg,lg:p.md}))}>{dark?'🌞':'🌛'}</div>\n                <div onClick={()=>setSize((p:any)=>({md:p.lg,lg:p.md}))}>{size>1?'👶':'👨'}</div>\n            </Trans>\n            <Helmet>\n                <title>{note?\"note\":\"Loading...\"}</title>\n                <meta charSet=\"utf-8\" />\n                <meta name=\"Hatena::Bookmark\" content=\"nocomment\" />\n                <link rel=\"canonical\" href=\"https://tsei.jp/\" />\n            </Helmet>\n        </Wrapper>\n    )\n}\n\n\nReactDOM.render(\n  <HelmetProvider>\n    <Note />\n  </HelmetProvider>,\n  document.getElementById('root')\n);\n","import {PageConfig, Page} from './types'\r\nimport {URLType} from '../types'\r\nimport {joinURL} from '../utils'\r\n// ************************* 👌 use-page 👌 ************************* //\r\nexport const equalPathname = (...urls:(URLType|string|undefined|null|false)[]) =>\r\n    urls.map(u => typeof u===\"string\"? new URL(u) : u)\r\n        .map(u => u && joinURL(u.pathname, \"/\"))\r\n        .every((u, _, self) => u===self[0])\r\n\r\nexport const pageConfig:PageConfig = {onChange:null,}\r\nexport const defaultPage = {\r\n    id      :window.location.pathname.split('/').filter(v=>v).find((_,i)=>i===1)||\"\",\r\n    isHome  :window.location.pathname.split('/').filter(v=>v).length > 1,\r\n    isLocal :window.location.hostname===\"localhost\",\r\n    protocol:window.location.protocol ||\"\",\r\n    hostname:window.location.hostname ||\"\",\r\n    portname:window.location.port     ||\"\",\r\n    pathname:window.location.pathname ||\"\",\r\n    search  :window.location.search   ||\"\",\r\n    hash    :window.location.hash     ||\"\",\r\n    language:window.navigator.language||\"ja\",\r\n    urls    :[new URL(window.location.href)],\r\n}\r\nexport const joinPage = <T={}>(page:Page<T>):string|string[] => {\r\n    const {protocol,hostname,portname,pathname=\"\",search=\"\",hash=\"\"} = page;\r\n    const arr  =[protocol,hostname,portname,pathname,search,hash]\r\n    const getp =(port:any)=>port?`:${port}`:\"\"\r\n    const geti =(i=0,n:any)=>n instanceof Array?(i<n.length?n[i]:n[n.length-1]):n\r\n    if (arr.every(v=>typeof v===\"string\"))\r\n        return joinURL(`${protocol}//${hostname}${getp(portname)}/`,pathname as any, search as any)\r\n    const maxLength = arr.map(v=>v instanceof Array?v.length:1).reduce((a,b)=>a>b?a:b)\r\n    return [...Array(maxLength)].map((_,i) =>\r\n        joinURL( `${geti(i,protocol)}//${geti(i,hostname)\r\n            }${getp(geti(i,portname))}/`,geti(i,pathname),geti(i,search) )\r\n    ) as string[]\r\n}\r\nexport const normPage = <T extends {}={}>(page:Page<T>) => {\r\n    const state = {...page} as any\r\n    Object.entries(state)\r\n          .sort(([_,val]) => typeof val===\"function\"?1:-1)\r\n          .forEach(([key,val]: any) => (state[key]=typeof val===\"function\"?val(state):val))\r\n    const urls = joinPage<T>(state as Page<T>)\r\n    return {...state, urls:urls instanceof Array\r\n      ? urls.map((u:any) => typeof u===\"string\" ? new URL(u) : u) as URLType[]\r\n      : [typeof urls===\"string\" ? new URL(urls) : urls] as URLType[] } as Page<T>\r\n}\r\n","import { useEffect, useCallback, useState, useRef } from 'react'\r\nimport { NoteNode as NN, NoteGetter, NotePoster, NoteConfig} from './types'\r\nimport { None, URLType, BasicProps} from '../types'\r\nimport {equalPathname} from '../Page'\r\nimport { is } from '../utils'\r\n\r\n\r\nexport function useNote (\r\n    initGetURL?: BasicProps<URLType|string>,\r\n    initGetter?: NoteGetter|null,\r\n    initPoster?: NotePoster|null,\r\n    initNoteConfig?: Partial<NoteConfig>\r\n): [ NN, (\r\n        updateGetURL?: ((pre:NN)=>None<URLType|string>)|None<URLType|string>,\r\n        updateGetter?: NoteGetter|null,\r\n        updateConfig?: Partial<NoteConfig>\r\n    ) => void, (\r\n        updatePoster?: NotePoster|null,\r\n        updateConfig?: Partial<NoteConfig>\r\n    ) => void\r\n]\r\nexport function useNote (\r\n    initGetURL: any=\"/\",\r\n    initGetter: any=null,\r\n    initPoster: any=null,\r\n    initNoteConfig: any={}\r\n) {\r\n    const getURLRef  = useRef<URLType>()\r\n    const getterRef  = useRef(initGetter)\r\n    const posterRef  = useRef(initPoster)\r\n    const configRef  = useRef(initNoteConfig)\r\n    const isFetching = useRef<boolean>(false)\r\n    const [note,set] = useState<NN>(null)\r\n    //  ************************* ************** *************************  //\r\n    //  ************************* 📋 useEffect 📋 *************************  //\r\n    useEffect(() => {\r\n        const initURL = normalizeURL(initGetURL)\r\n        if (equalPathname(getURLRef.current, initURL)) return\r\n        getURLRef.current = initURL\r\n        if  (isFetching.current) return\r\n        else isFetching.current = true;\r\n        if (getterRef.current)\r\n            getterRef.current(getURLRef.current).then((res:any) => {\r\n                setTimeout(() => void (isFetching.current = false), 1000)\r\n                set(pre => res || pre)\r\n            })\r\n    }, [initGetURL])\r\n    //  ************************* ************* *************************  //\r\n    //  ************************* 📋 getNote 📋 *************************  //\r\n    //  * getNote(\"/api/note\", fetcher) => refresh note data from url\r\n    //  * getNote(p=>p.next  , fetcher) => add note data from url\r\n    //  ************************* ************* *************************  //\r\n    const getNote = useCallback((\r\n        updateURL=\"/\",\r\n        updateGetter=null,\r\n        updateConfig={}) => {\r\n        if  (isFetching.current || !note?.next) return\r\n        else isFetching.current = true;\r\n        if (is.fun(updateURL))    updateURL = updateURL(note);\r\n        if (is.str(updateURL))    updateURL = new URL(updateURL);\r\n        if (is.nul(updateGetter)) updateGetter = getterRef.current;\r\n        const previousURL = getURLRef.current\r\n        getURLRef.current = updateURL\r\n        getterRef.current = updateGetter\r\n        configRef.current = {...configRef.current, ...updateConfig}\r\n        if (getterRef.current)\r\n            getterRef.current(updateURL).then((res:any) => {\r\n                setTimeout(() => (isFetching.current = false), 1000)\r\n                set(pre => {\r\n                    if (!equalPathname(previousURL, getURLRef.current)) return res\r\n                    const {onChange=null} = configRef.current\r\n                    typeof onChange===\"function\" && onChange()\r\n                    const diff = pre\r\n                      ? (pre.results||[]).filter((p:any) =>\r\n                      ! (res.results||[]).find((r:any) => r.id===p.id)\r\n                    ) : []\r\n                    return {...res, results:[...diff, ...res.results]}\r\n                })\r\n            })\r\n    }, [note])\r\n\r\n    //  ************************* ************** *************************  //\r\n    //  ************************* 📋 postNote 📋 *************************  //\r\n    //  ************************* ************** *************************  //\r\n    const postNote = useCallback((updatePoster=null,updateConfig={}) => {\r\n        if  (isFetching.current) return\r\n        else isFetching.current = true;\r\n        if (is.nul(updatePoster)) updatePoster = posterRef.current;\r\n        posterRef.current = updatePoster\r\n        configRef.current = {...configRef.current, ...updateConfig}\r\n        return\r\n    }, [])\r\n    return [note, getNote, postNote]\r\n}\r\n\r\nfunction normalizeURL (url: (()=>string|URLType)|string|URLType): URLType {\r\n    if (is.fun(url)) url = url()\r\n    if (is.str(url)) url = new URL(url)\r\n    return url\r\n}\r\n","// import React from 'react'\r\n// import {animated as a} from 'react-spring'\r\n// export function Page (props: {}): JSX.Element\r\n// export function Page (props: any) {\r\n//     return (\r\n//         <a.div {...usePage(props)}/>\r\n//     )\r\n// }\r\n// export default Page\r\nexport * from './hooks'\r\nexport * from './types'\r\nexport * from './utils'\r\n","export * from './Note';\r\nexport * from './Page';\r\nexport * from './User';\r\nexport * from './View'\r\nexport * from './utils';\r\nexport * from './types';\r\n","import {NoteNode as NN, NoteGetter, NotePoster, NoteConfig} from './types'\r\nimport { None, URLType} from '../types'\r\nimport {useNote} from './hooks'\r\n\r\n// export function Note (props: {\r\n// ]}): JSX.Element\r\n\r\nexport function Note (props: {\r\n    children: undefined & ((note: NN, setNote: ((\r\n            updateGetURL?: ((pre:NN)=>None<URLType|string>)|None<URLType|string>,\r\n            updateGetter?: NoteGetter|null,\r\n            updateConfig?: Partial<NoteConfig>\r\n        ) => void), postNote: ((\r\n            updatePoster?: NotePoster|null,\r\n            updateConfig?: Partial<NoteConfig>\r\n        ) => void)\r\n    ) => Element | null)\r\n}): Element | null\r\n\r\nexport function Note (props: any) {\r\n    return props?.children(useNote(props))\r\n}\r\nexport * from './hooks'\r\nexport * from './types'\r\n","import {useEffect, useState, useCallback, useRef} from 'react'\r\nimport {pageConfig as defaultConf, defaultPage, normPage} from './utils'\r\nimport {BasicProps, BasicState, BasicAction} from '../types'\r\nimport {Page , PageConfig as Conf} from './types'\r\nexport const usePage = <T extends {}={}>(\r\n    props :BasicProps<Partial<Page<T>>>,//BasicProps<Page<T>>,\r\n    config:BasicProps<Partial<Conf<T>>>={},\r\n): [Page<T>, BasicAction<Partial<Page<T>>>] => {\r\n    if (typeof props===\"function\") props  = props()\r\n    if (typeof config===\"function\")config = config()\r\n    const pageRef = useRef<Page<T>>({...defaultPage, ...props } as Page<T>)\r\n    const confRef = useRef<Conf<T>>({...defaultConf, ...config} as Conf<T>)\r\n    const [p,set] = useState<Page<T>>( normPage(pageRef.current) )\r\n    const setPage = useCallback((state:BasicState<Partial<Page<T>>>) => {\r\n        if (typeof state===\"function\")\r\n            state = state(pageRef.current as Partial<Page<T>>)\r\n        pageRef.current = {...pageRef.current, ...state}\r\n        set(pre => {\r\n            const newPage = normPage(pageRef.current)\r\n            if (pre.pathname===newPage.pathname)\r\n                return newPage\r\n            window.history.pushState('', '',\r\n                newPage.pathname instanceof Array\r\n                  ? newPage.pathname[0] || ''\r\n                  : newPage.pathname    || '')\r\n            return  newPage\r\n        })\r\n    }, [set])\r\n    useEffect(() => {\r\n        const {onChange} = confRef.current\r\n        typeof onChange===\"function\" && onChange()\r\n    }, [p.id])\r\n    return [p, setPage]\r\n}\r\n","// import {useUser} from './hooks'\r\n// export function User\r\nexport * from './hooks'\r\nexport * from './types'\r\n"],"sourceRoot":""}