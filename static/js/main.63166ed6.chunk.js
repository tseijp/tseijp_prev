(this["webpackJsonp@tsei/colo"]=this["webpackJsonp@tsei/colo"]||[]).push([[0],{199:function(e,t,n){e.exports=n(415)},203:function(e,t,n){},415:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(25),i=n.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(203);var c=n(18),s=n(10),u=n(68),l=(Object(a.forwardRef)((function(e,t){e.size;var n=e.limit,r=void 0===n?100:n,i=Object(u.a)((function(e){var n=e.down,a=Object(s.a)(e.movement,2),o=a[0],i=a[1],c=(n?o:0)/r,u=(n?i:0)/r;t.current={rx:c,ry:u}})),c=Object(a.useMemo)((function(){return{width:"100%",height:"100%",position:"fixed"}}),[]);return o.a.createElement("div",Object.assign({style:c},i()))})),o.a.forwardRef((function(e,t){var n=e.onDrag,r=void 0===n?null:n,i=e.color,c=void 0===i?16777215:i,l=e.alpha,m=void 0===l?.1:l,d=e.size,p=void 0===d?100:d,f=e.limit,b=void 0===f?100:f,g=Object(a.useState)({x:0,y:0,scale:1}),h=Object(s.a)(g,2),j=h[0],O=h[1],v=Object(u.a)((function(e){var n=e.down,a=Object(s.a)(e.movement,2),o=a[0],i=a[1];o*o+i*i>b*b||(O({x:n?o:0,y:n?i:0,scale:n?1.2:1,immediate:n}),t.current={x:(n?o:0)/b,y:(n?i:0)/b},r&&r(o/b,-i/b))})),y=1.5*b,E=1.5*b,w=(j.x<0?-j.x:j.x)/b+(j.y<0?-j.y:j.y)/b,k={userSelect:"none",width:p*j.scale+"px",height:p*j.scale+"px",boxShadow:"rgba(0,0,0,".concat(w,")"),backgroundColor:"rgba(".concat([c>>16&255,c>>8&255,255&c].join(","),",").concat(m+w/10,")"),transform:"translate(-50%, 50%)",position:"fixed",borderRadius:"100px",bottom:y-j.y+"px",left:E+j.x+"px"};return o.a.createElement("div",Object.assign({style:k},v()))}))),m=n(29),d=function(e){var t=e.open,n=e.setOpen,i=e.children,c=Object(a.useMemo)((function(){return document.getElementById("root")}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.c,{style:{position:"fixed",width:"1.7em",height:"1.7em",fontSize:"1.7em",top:"1em",left:"1em",display:"flex",borderRadius:"1em",backgroundColor:"white",padding:"0 0",justifyContent:"center",alignItems:"center"},onClick:function(){return n(!t)}},o.a.createElement(m.d,{icon:"user"})),t&&Object(r.createPortal)(o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",top:0,left:0,zIndex:200,position:"fixed",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)"},onClick:function(){return n(!1)}},o.a.createElement("div",{style:{position:"fixed",width:"min(24rem,95%)",height:"auto",backgroundColor:"white",padding:"1em"},onClick:function(e){return e.stopPropagation()}},i)),c))},p=function(e){var t=e.isSignin,n=e.setIsSignin,a={width:"1.7em",height:"1.7em",fontSize:"1em",borderRadius:"1em",transform:"translate(30%,-30%) rotate(".concat(t?0:180,"deg)"),transition:"2s",top:0,right:0,padding:0,position:"absolute"};return o.a.createElement("h1",null,"Sign ",t?"In":"Up",o.a.createElement(m.c,{style:a,onClick:function(){n(!t)}},o.a.createElement(m.d,{icon:"sync-alt"})))},f=n(15),b=n(52),g=function(e){var t=e.isSignin,n=e.cred,r=e.setCred,i=Object(a.useCallback)((function(e){e.persist(),r((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(f.a)({},e.target.name,e.target.value))}))}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.f,{value:n.username,name:"username",onChange:i,label:"Type your username",icon:"user",group:!0,type:"text",validate:!0,error:"wrong",success:"right"}),o.a.createElement(m.f,{value:n.password,name:"password",onChange:i,label:"Type your password",icon:"lock",group:!0,type:"password",validate:!0,autoComplete:"on"}),!t&&o.a.createElement(m.f,{value:n.email,name:"email",onChange:i,label:"Type your email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right"}))},h=function(e){var t=e.signin,n=e.setSignin,r=Object(a.useState)(!t.authtoken),i=Object(s.a)(r,2),c=i[0],u=i[1],l=Object(a.useState)(!!t.username),f=Object(s.a)(l,2),b=f[0],h=f[1],j=Object(a.useState)(!1),O=Object(s.a)(j,2),v=O[0],y=O[1],E=Object(a.useState)({username:t.username||"",password:"",email:""}),w=Object(s.a)(E,2),k=w[0],x=w[1],S=Object(a.useCallback)((function(){n(k,b),y(!0),setTimeout((function(){return y(!1)}),2500)}),[k,b]),C=Object(a.useCallback)((function(){n(null),u(!1),window.location.reload()}),[]);return t.username&&t.authtoken?o.a.createElement(d,{open:c,setOpen:u},o.a.createElement("h1",null,"Sign out"),o.a.createElement(m.c,{style:{width:"100%",margin:"2em auto",borderRadius:"2em"},onClick:function(){return C()}},"Sign out")):o.a.createElement(d,{open:c,setOpen:u},o.a.createElement(p,{isSignin:b,setIsSignin:h}),o.a.createElement(g,{isSignin:b,cred:k,setCred:x}),v&&o.a.createElement(m.b,{color:"danger",onClick:function(){return y(!1)}},"400 Bad Request"),o.a.createElement(m.c,{style:{width:"100%",margin:"2em auto",borderRadius:"2em"},onClick:function(){return S()}},"Sign ",b?"In":"Up"))},j=(n(2),n(11)),O=n(181),v=n.n(O),y=n(182),E=n(115),w=function(e){var t=Object(a.useMemo)((function(){var e=window.location.hash.slice(1)||"home",t="ws://".concat("192.168.0.112:8000","/ws/chat/").concat(e,"/");return new WebSocket(t)}),[]),n=Object(a.useMemo)((function(){return"tseijp"})),o=Object(a.useState)({position:[0,0,0],rotation:[0,0,0],actions:[]}),r=Object(s.a)(o,2),i=r[0],c=r[1];Object(a.useEffect)((function(){t.onmessage=function(t){return e(JSON.parse(t.data).message)},t.onclose=function(e){return console.error("User socket closed",e)},t.onerror=function(e){return console.error("User socket error",e)},t.onopen=function(e){return console.log("User socket opened",e)}}),[t,e]);return[i,function(e){var a=e.position,o=void 0===a?i.position:a,r=e.rotation,s=void 0===r?i.rotation:r,u=e.actions,l={position:o,rotation:s,actions:void 0===u?i.actions:u,username:n};t.send(JSON.stringify({message:l,username:n})),console.log(JSON.stringify({message:l})),c(l)}]},k=(n(37),n(60));n(187),n(192);o.a.forwardRef((function(e,t){var n=["https://www.youtube.com/embed/",e.id,"?rel=0&autoplay=1&mute=1"].join("");return o.a.createElement("div",{ref:t,style:{width:"480px",height:"360px",backgroundColor:"rgba(0,0,0,0)",transparent:!1,position:"absolute",pointerEvents:"auto",transform:"translate(-50%, 0%)"}},o.a.createElement("iframe",{src:n,style:{width:"480px",height:"360px",border:"0px"}}))})),n(193);var x=function(e){var t=e.name,n=e.position,r=(e.rotation,Object(a.useState)(!1)),i=Object(s.a)(r,2),u=i[0],l=i[1],m=Object(a.useRef)();return Object(j.g)((function(){return m.current.rotation.x=m.current.rotation.y+=.01})),Object(a.useEffect)((function(){var e;(e=m.current.position).set.apply(e,Object(c.a)(n))}),[n]),o.a.createElement("mesh",{name:t,ref:m,scale:u?[1.5,1.5,1.5]:[1,1,1],onClick:function(e){return l(!u)}},o.a.createElement(k.a,null,t),o.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),o.a.createElement("meshStandardMaterial",{attach:"material",color:u?"hotpink":"orange"}),o.a.createElement("axesHelper",{scale:[1,1,1]}))},S=function(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null),r=function(){var e="192.168.0.112:8000",t=Object(E.a)("username",""),n=Object(s.a)(t,2),o=n[0],r=n[1],i=Object(E.a)("authtoken",null),c=Object(s.a)(i,2),u=c[0],l=c[1],m=Object(a.useState)({username:o,authtoken:u}),d=Object(s.a)(m,2),p=d[0],f=d[1],b=Object(a.useMemo)((function(){return{"Content-Type":"application/json"}}));return Object(a.useEffect)((function(){return f({username:o,authtoken:u})}),[o,u]),[p,Object(a.useCallback)((function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return y.remove("authtoken");var a="http://".concat(e,"/").concat(n?"auth":"api/user","/");v.a.post(a,t,{headers:b}).then((function(e){200!==e.status&&201!==e.status||!e.data.token||(r(t.username,{path:"/"}),l(e.data.token,{path:"/"}))})).catch((function(e){return 500}))}),[e,b])]}(),i=Object(s.a)(r,2),u=i[0],m=i[1],d=Object(a.useState)({name:u.username,position:[0,0,0],rotasion:[0,0,0]}),p=Object(s.a)(d,2),f=p[0],b=(p[1],Object(a.useState)([])),g=Object(s.a)(b,2),O=g[0],k=g[1],S=Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=n.current.children.find((function(t){return t.name===e}));a&&e===o.name||(o||k((function(t){return[].concat(Object(c.a)(t),[{name:e,position:[0,0,0],rotation:[0,0,0]}])})),t&&t(o))}),[n]),C=w((function(e){S(e.username,(function(t){var n;console.log(t.position),console.log(e.position),t.position&&(n=t.position).set.apply(n,Object(c.a)(e.position))}))})),R=Object(s.a)(C,2),I=(R[0],R[1]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{camera:[0,0,0],style:{position:"fixed",width:"100%",height:"100%",backgroundColor:"blue",top:0,left:0}},o.a.createElement("hemisphereLight",{skyColor:"black",groundColor:16777215,intensity:.68,position:[0,50,0]}),o.a.createElement("directionalLight",{position:[-8,12,8],castShadow:!0}),o.a.createElement("axesHelper",{position:[0,0,0],scale:[1,1,1]}),o.a.createElement("group",{ref:n},o.a.createElement(x,f),O.map((function(e){return o.a.createElement(x,e)})))),o.a.createElement(h,{signin:u,setSignin:m}),o.a.createElement(l,{ref:t,color:"rgba(0,0,0)",onDrag:function(e,t){S(u.username,(function(n){n.position.x+=e,n.position.y+=t;var a=Object.values(n.position),o=Object.values(n.rotation);I({position:a,rotation:o,username:n.name})}))}}))};n(412),n(413),n(414);i.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[199,1,2]]]);
//# sourceMappingURL=main.63166ed6.chunk.js.map