{"version":3,"sources":["docs/serviceWorker.ts","docs/components/Button.tsx","docs/components/Sheet.tsx","docs/components/Scanner.tsx","docs/components/Slider.tsx","src/utils.ts","docs/components/Book.tsx","src/useBook.ts","docs/index.tsx"],"names":["Boolean","window","location","hostname","match","Button","height","limit","opened","started","onOpen","onClose","useSpring","scale","x","y","set","open","useCallback","config","stiff","start","molasses","close","bind","useGesture","onClick","onDrag","down","movement","mx","my","cancel","display","to","py","style","useMemo","fontSize","bottom","right","width","borderRadius","zIndex","position","background","alignItems","justifyContent","useEffect","div","className","Sheet","children","canceled","wobbly","velocity","useDrag","last","vy","vxvy","immediate","initial","get","filterTaps","bounds","top","rubberband","f","useRef","current","left","backgroundColor","touchAction","Quagga","require","drawPath","path","ctx","xy","color","ImageDebug","lineWidth","Scanner","onStarted","onDetected","useState","detected","init","err","console","log","stop","onProcessed","result","canvas","overlay","dom","boxes","clearRect","map","s","Number","getAttribute","forEach","box","isMain","drawRect","codeResult","line","code","id","Slider","visible","len","length","idx","getPos","i","firstVis","firstVisIdx","useSprings","springs","prev","wheelOffset","dragOffset","runSprings","vxy","Math","floor","prevPosition","configPos","tension","friction","offset","vx","onWheel","key","willChange","getPath","urltext","isbns","url","URL","paths","pathname","split","filter","v","index","find","isbn","_","name","ref","push","parseInt","Book","book","size","isssl","search","image","Image","srcRef","host","img","setImg","getsrc","num","onError","pre","src","slice","alt","onload","useBook","cantopen","onHover","e","hovering","stopPropagation","notOpen","styles","pointerEvents","items2","App","urls","setUrls","setBook","books","setBooks","setOpened","setStarted","nowDetecting","addURL","newcode","setTimeout","addBook","innerHeight","bool","innerWidth","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.dca76ca0.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, {useEffect, useCallback, useMemo} from 'react'\r\n//import { Spring } from 'react-spring/renderprops'\r\nimport { useSpring, animated, config } from 'react-spring'\r\nimport { useGesture } from 'react-use-gesture'\r\n\r\ntype ButtonProps = {\r\n    height:number,\r\n    limit :number,\r\n    opened :boolean,\r\n    started:boolean,\r\n    onOpen :Function,\r\n    onClose:Function,\r\n}\r\n\r\nexport function Button ({height,limit,opened,started,onOpen,onClose}:ButtonProps) {\r\n    const [{ scale,x,y }, set] = useSpring(() => ({ scale:1, x:0, y:0 }))\r\n    //const start  =()=>set({y:10  , config:config.stiff })\r\n    const open =useCallback(()=>set({scale:1.2,x:-25,y:-25 , config:config.stiff })  ,[set])\r\n    const start=useCallback(()=>set({scale:1  ,x:0  ,y:+100, config:config.molasses}),[set])\r\n    const close=useCallback(()=>set({scale:1  ,x:0  ,y:0   , config:config.stiff })  ,[set])\r\n    const toggle=()=>{return (opened&&started)?(onClose(), close()):(onOpen(), open())}\r\n    const bind = useGesture({\r\n        onClick: ()=>toggle(),\r\n        onDrag : ({down,movement:[mx,my],cancel})=>{\r\n            if ((mx**2+my**2 > limit**2) && cancel) cancel()\r\n            set({ x:down?mx:0, y:down?my:0,config:config.stiff })\r\n        }\r\n    })\r\n    const display= y.to(py=>(py<height?true:false))?'flex':'none'\r\n    const style = useMemo<React.CSSProperties>(()=>{\r\n        return {\r\n            fontSize:\"2em\", bottom:\"1em\", right:\"1em\", height:\"2em\", width:\"2em\", borderRadius:\"4em\",\r\n            zIndex:99, position:\"fixed\", background:\"coral\", alignItems:\"center\", justifyContent:\"center\",\r\n        }\r\n    }, [])\r\n    useEffect(()=>{started?start():close()}, [started, start, close])\r\n    return (\r\n        <animated.div className=\"action-btn\" {...bind()} style={{...style, display, scale, x, y, }}>\r\n            +</animated.div>\r\n    )\r\n}\r\n","import React, { useEffect, useCallback, useRef, useMemo } from 'react'\r\nimport { useSpring, animated, config } from 'react-spring'\r\nimport { useDrag } from 'react-use-gesture'\r\nimport { SheetProps } from '../types'\r\n\r\nexport function Sheet ({children, height=100, started=false, onOpen=null,onClose=null}:SheetProps) {\r\n    const [{ y }, set] = useSpring(() => ({ y:height }))\r\n    const open = useCallback((canceled=false)=> onOpen&&(onOpen() ,set({ y:0     , config:canceled?config.wobbly:config.stiff }) ),[onOpen, set])\r\n    const close = useCallback((velocity=0)=> onClose&&(onClose(),set({ y:height, config:{...config.stiff, velocity} }) ),[height, onClose, set])\r\n    const bind = useDrag(\r\n        ({ last, vxvy:[,vy],movement:[mx,my], cancel }) => {\r\n            if (my<-height/3) cancel&&cancel()\r\n            if (last) return ( (my>height*0.5||vy>2.5) && (-100<mx&&mx<100) )? close(vy):open(vy>0)\r\n            set({ y:my, immediate: false, config: config.stiff })\r\n        }, { initial:()=>[0,y.get()], filterTaps:true, bounds:{top:0}, rubberband:true }\r\n    )\r\n    const f = useRef((started:boolean)=>( started? open() : close()))\r\n    useEffect(()=>{ f.current(started) }, [started])\r\n    const display = y.to(py =>(py<height?'block':'none'))\r\n    const style = useMemo<React.CSSProperties>(()=>{\r\n        const bottom = `calc(-100vh + ${height-100}px)`\r\n        return {\r\n            bottom, left: \"2vw\",  width:\"96vw\", height:\"calc(100vh + 100px)\",\r\n            position:\"fixed\", borderRadius:\"4em 4em 0px\", zIndex:100,\r\n            backgroundColor:'rgba(0,0,0,0)', touchAction: \"none\",\r\n        }\r\n    }, [height])\r\n    //console.log('\\tRender Sheet');\r\n    return (\r\n        <animated.div className=\"sheet\" {...bind()} style={{...style,y,display}}>\r\n            {children}\r\n        </animated.div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport config from \"../../config-camera.json\";\r\nimport { ScannerProps } from '../types'\r\nconst Quagga = require ('quagga');\r\n\r\nconst drawPath = (path:any,ctx:any,xy:any,color:string) => Quagga.ImageDebug.drawPath(path,xy,ctx,{color,lineWidth:2})\r\nconst drawRect = (path:any,ctx:any,isMain:boolean) => drawPath(path,ctx,{x:0,y:1},isMain?'#0F0':\"#00F\")\r\nconst clearRect= (dom:any,ctx:any)=>ctx.clearRect( 0, 0, ...[\"width\",\"height\"].map(s=>Number(dom.getAttribute(s))) )\r\n\r\nexport function Scanner ({onStarted, onDetected}:ScannerProps) {\r\n    const [started]  = useState(onStarted)  // err\r\n    const [detected] = useState(onDetected) // err\r\n    useEffect (() => {\r\n        Quagga.init(config, (err:any)=> {\r\n            if (err) return console.log(err, \"error msg\");\r\n            return ( Quagga.start(), started(true))\r\n        })\r\n        return () => 1&&( Quagga.stop(), started(false))\r\n    }, [started]);\r\n    useEffect(()=>{\r\n        Quagga.onProcessed((result:any) => {\r\n            if (!result) return\r\n            const ctx = Quagga.canvas.ctx.overlay\r\n            const dom = Quagga.canvas.dom.overlay\r\n            result.boxes && clearRect(dom, ctx)\r\n            result.boxes.forEach( (box:any) => drawRect(box, ctx, box===result.box ))\r\n            result.codeResult && drawPath(result.line, ctx, {x:\"x\",y:\"y\"}, \"#F00\")\r\n        });\r\n        Quagga.onDetected ((result:any) => detected(result.codeResult.code) )\r\n    }, [detected])\r\n    return <div id=\"interactive\" className=\"viewport\" style={{width:\"100%\",height:\"100%\",top:0,bottom:0}}/>\r\n}\r\n","// https://codesandbox.io/s/infinite-slideshow-nigoy?file=/src/index.js\r\n\r\nimport React, {useCallback, useRef, useMemo} from 'react'\r\nimport { useGesture } from 'react-use-gesture'\r\nimport { useSprings, animated } from 'react-spring'\r\nimport { SliderProps } from '../types'\r\n\r\nexport function Slider ({children, width=600,visible=4,style={}}:SliderProps) {\r\n    const len = useMemo(()=>(children.length>visible)?children.length:visible,[children,visible])\r\n    const idx = useCallback((x) => (x<0 ? x+len : x) % len, [len])\r\n    const getPos = useCallback((i, firstVis, firstVisIdx) => idx(i - firstVis + firstVisIdx), [idx])\r\n    const [springs, set] = useSprings(len, i => ({ x : (i<len-1?i:-1)*width }) )\r\n    const prev        = useRef([0, 1])\r\n    const wheelOffset = useRef(0)\r\n    const dragOffset  = useRef(0)\r\n    const runSprings = useCallback((xy, vxy)=>{\r\n        const firstVis = idx(Math.floor(xy / width) % len)\r\n        const firstVisIdx = (vxy<0)?len-visible:1\r\n        set((i:any) => {\r\n            const position     = getPos(i, firstVis       , firstVisIdx)\r\n            const prevPosition = getPos(i, prev.current[0], prev.current[1])\r\n            const rank = firstVis - (xy<0?len:0) + position - firstVisIdx\r\n            const configPos = vxy > 0 ? position : len-position-1\r\n            return {\r\n                x: (-xy % (width*len)) + width*rank,\r\n                immediate: vxy<0 ? prevPosition>position : prevPosition<position,\r\n                config: { tension:(1+len-configPos)*100, friction:30+configPos*40 }\r\n            }\r\n        })\r\n        prev.current = [firstVis, firstVisIdx]\r\n    }, [idx, getPos, width, visible, set, len] )\r\n    const bind = useGesture({\r\n        onDrag :({offset:[x,],vxvy:[vx,]})=>vx&&( dragOffset.current=-x, runSprings(wheelOffset.current-x, -vx) ),\r\n        onWheel:({offset:[,y],vxvy:[,vy]})=>vy&&( wheelOffset.current= y, runSprings(dragOffset.current+y,  vy) ),\r\n    })\r\n    //console.log('\\t\\tRender Slider');\r\n    return (\r\n        <div {...bind()} style={{position:\"absolute\",bottom:0,left:0,width:\"100%\",height:\"100%\"}}>\r\n          {springs.map(({x}, i) => (\r\n            <animated.div key={i} style={{position:'absolute',x,willChange:'transform',...style}}>\r\n                {children[i]}\r\n            </animated.div>\r\n          ))}\r\n        </div>\r\n    )\r\n}\r\n","export function getPath (urltext=\"\", isbns={current:[] as number[]}) {\r\n    //const url = new URL(`${urlRef.current.match('https')?'':'https://'}${urlRef.current}`)\r\n    const url = new URL(`${urltext.match('https')?'':'https://'}${urltext}`)\r\n    const paths = url.pathname.split('/').filter(v=>v)\r\n    const index = paths.map((v,i) => v==='dp'&&i ).find(v=>v) || 0\r\n    //const dpid = paths.find((_,i)=>i===index+1) || ''\r\n    //const asin = ''//dpid[0]==='B' ? paths.find((_,i)=>i===index+1) :''\r\n    const isbn = paths.find((_,i)=>i===index+1) || ''\r\n    const name = index > 0 ? paths[0] : ''\r\n    const ref  = paths.find(v=>v.match('ref='))?.split('ref=')[1] || ''\r\n    isbns?.current?.push( parseInt(isbn, 10) )\r\n    //console.log('\\t__useMemo path__', isbn);\r\n    return {name, isbn, ref}\r\n}\r\n","import React, { useMemo, useRef } from 'react'\r\nimport { useGesture } from 'react-use-gesture'\r\nimport { useSpring, animated } from 'react-spring'\r\nimport { useBook } from '../../src'\r\n\r\ntype BookProps = {\r\n    onOpen?:any,\r\n    style?:any,\r\n    url  ?:string,\r\n    limit?:number,\r\n}\r\n\r\nexport function Book ({url='', limit=400, style={}, onOpen}:BookProps) {\r\n    const book = useBook(url)\r\n    const cantopen = useRef(false)\r\n    const [{scale,x,y}, set] = useSpring(()=>({ scale:1, x:0, y:0 }))\r\n    const bind = useGesture({\r\n        onHover:(e)=>set({scale:e.hovering?1.1:1}),\r\n        onClick:(e)=>1&&(onOpen(), e.stopPropagation()),\r\n        onDrag :({down,vxvy:[vx,],movement:[mx,my],cancel})=>{\r\n            if ((mx**2+my**2 > limit**2) && cancel) cancel()\r\n            const notOpen = 100<Math.floor(mx)||2<Math.floor(vx)||down||cantopen.current\r\n            set({ x:down?mx:0, y:down?my:0, scale:(notOpen&&Math.floor(my)<limit/2)?1.2:0.8 })\r\n            //console.log(100<Math.floor(mx),2<Math.floor(vx),down,cantopen.current);\r\n            if (notOpen) return null\r\n            cantopen.current = true\r\n            onOpen()\r\n        },\r\n    })\r\n    const styles = useMemo(()=>({\r\n        div:{width:\"auto\",height:\"100%\",scale,x,y, zIndex:1, ...style} as React.CSSProperties,\r\n        img:{width:\"auto\",height:\"100%\",borderRadius:\"1em\",pointerEvents:\"none\", } as React.CSSProperties,\r\n        //span:{position:\"absolute\",bottom:\"1em\",left:\"3em\",color:\"white\"} as React.CSSProperties,\r\n    }),[style,scale,x,y])\r\n    //console.log('\\t\\tRender Book', book.img);\r\n    return (\r\n        <animated.div style={styles.div} {...bind()}>\r\n            {book.img && <img alt=\"book\" style={styles.img} {...book.img}/>}\r\n        </animated.div>\r\n    )\r\n}\r\n","import { useCallback, useState, useEffect, useMemo, useRef  } from 'react'\r\nimport {getPath} from './utils'\r\nexport function useBook (urltext:string, config?: {\r\n    size: string,\r\n    isssl: boolean,\r\n    search: number,\r\n}): any\r\nexport function useBook (urltext='', {size='LZZZZZZZ',isssl=false,search=10}:any={}) {\r\n    const isbns = useRef<number[]>([])\r\n    const image = useRef<HTMLImageElement>(new Image())\r\n    const srcRef = useRef<string>('')\r\n\r\n    const path  = useMemo(()=>getPath(urltext, isbns),[urltext])\r\n    const host  = useMemo(()=>`${ isssl\r\n        ? 'images-na.ssl-images-'\r\n        : 'images-jp.' }amazon.com`,[isssl])\r\n    const [img, setImg] = useState<any>(null)\r\n\r\n    const getsrc = useCallback((num:number|string) =>\r\n        `http://${host}/images/P/${num}.09.${size}`\r\n    ,[host,size])\r\n\r\n    const onError = useCallback(()=>{\r\n        const pre = isbns.current[0]\r\n        const len = isbns.current.length\r\n        const num = pre + ~~((len+1)/2)*(len%2*2-1)\r\n        if(len > search || srcRef.current) return\r\n        isbns.current.push( num )\r\n        return setImg((pre:any)=>({...pre, src:getsrc(num)}))\r\n    }, [getsrc, search])\r\n\r\n    useEffect(()=>{\r\n        if (srcRef.current)\r\n            return //console.log('useEffect interupt', srcRef.current)\r\n        const num = isbns.current.slice(-1)[0] || path.isbn\r\n        const src = getsrc(num)\r\n        const alt =  path.name || ''\r\n        setImg({src,alt})//init\r\n        image.current.src = src\r\n        image.current.onload = () => {\r\n            const width = image.current.width\r\n            const height = image.current.height\r\n            if (width < 2 || height < 2)\r\n                return onError()\r\n            srcRef.current = image.current.src\r\n        }\r\n    }, [getsrc, onError, path, img])\r\n\r\n    return {path, image, img}\r\n}\r\n","import React, { Fragment, useCallback, useState, useRef } from 'react'\nimport ReactDOM from 'react-dom'\n//import { Spring } from 'react-spring/renderprops'\nimport './styles.css'\nimport { unregister } from './serviceWorker'\nimport { Book, Button, Scanner, Sheet, Slider } from './components'\n\n//const items1 = [4041013379,4041013381]//[...Array(3)].map((_,i)=>4041013378+i) // typescript 0~9\n//const items1 = [4041013380,4041002872,4041315224,4041067949,4041366059,4041245255]//角川 false\nconst items2 = [4041013380,4041002877,4041315220,4041067944,4041366054,4041245257]  //角川 true\n\nconst App = () => {\n    const [urls, setUrls] = useState<string[]>([])//([items2[0]].map(v=>`amazon.com/dp/${v}/`))// DEV\n    const [book, setBook] = useState<string>('')\n    const [books, setBooks] = useState<string[]>([...items2].map(v=>`amazon.com/dp/${v}/`))//(()=>[])//DEV\n    const [opened, setOpened] = useState<boolean>(false); // sheet stil opened\n    const [started, setStarted] = useState<boolean>(false); // quagga stil inited ?\n    const nowDetecting = useRef<string|null>(null)\n    const addURL = useCallback((code:string)=>{\n        if (nowDetecting.current!==null) return\n        if ( code.length!==10 && code.length!==13 ) return\n        const newcode = code.length===10?code:code.slice(3)\n        if ( urls.filter(url=>url.match(newcode)).length ) return\n        nowDetecting.current = newcode\n        setTimeout(()=>(nowDetecting.current = null), 2000)\n        setUrls(pre=>[...pre, `amazon.com/dp/${newcode}`])\n    }, [urls])\n    const addBook = useCallback((url:string)=>{\n        setOpened(false)\n        setTimeout(() => 1&&(setBook(url), setBooks(pre=>[...pre,url])), 1)\n    },[])\n    console.log(`Index Render ${opened?'':'no '}opened ${started?'':'no '}started`);\n    return (\n        <Fragment>\n            <Button\n                onOpen ={()=>!opened&&setOpened(true)  }//,setStarted(false))}\n                onClose={()=> opened&&setOpened(false) }//,setStarted(false))}\n                height ={window.innerHeight*0.96} limit={200} opened={opened} started={started}/>\n            <Sheet\n                onOpen ={()=>!opened&&(setOpened(true),setBook(''),setUrls([]))} // DEV\n                onClose={()=> opened&&setOpened(false) }\n                height ={window.innerHeight*0.96} started={started}>\n                {opened &&\n                    <Scanner onStarted={(bool:boolean)=>setStarted(bool)} onDetected={addURL}/>\n                }\n                {(opened&&started)&&\n                    <Slider width={window.innerWidth/4} visible={6} style={{height:\"40%\",bottom:\"15%\",left:0,}}>\n                    {urls.map((url,i)=>\n                        <Book key={i} url={url} onOpen={()=>addBook(url)}/>\n                    )}\n                    </Slider>\n                }\n            </Sheet>\n            <Slider width={window.innerWidth/3} visible={5} style={{height:\"50%\",top:0,left:0,}}>\n                {books.map((url,i)=>\n                    <Book key={i} url={url} onOpen={()=>setBook(url)}/>\n                )}\n            </Slider>\n            {/*debug*/}\n            <div style={{position:\"fixed\",width:\"auto\",height:\"50%\",bottom:0,left:0,fontSize:\"2em\"}}>\n                <span style={{color:\"white\"}}>\n                    {book && <Book url={book} onOpen={()=>setBook('')}/>}\n                </span>\n            </div>\n        </Fragment>\n    )\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\nunregister();\n"],"sourceRoot":""}